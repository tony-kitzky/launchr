<!DOCTYPE html>
<html>
<head>
  <title>Custom Link Launcher with Session Token</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    .category { margin: 2em 0; padding: 1em; border: 1px solid #ddd; }
    button { margin: 0.5em; padding: 0.5em 1em; }
    .delete-btn { color: red; cursor: pointer; margin-left: 1em; }
    #addForm { margin: 2em 0; padding: 1em; background: #f5f5f5; }
    input { margin: 0.5em; padding: 0.3em; }
    #sessionTokenDisplay { font-size: 0.9em; color: #555; }
  </style>
</head>
<body>

<div id="addForm">
  <h3>Add New Website</h3>
  <input type="text" id="linkTitle" placeholder="Website Title">
  <input type="url" id="linkUrl" placeholder="https://example.com">
  <select id="linkCategory">
    <option value="work">Work</option>
    <option value="personal">Personal</option>
  </select>
  <button onclick="addNewLink()">Add Link</button>
  <div id="sessionTokenDisplay"></div>
</div>

<div class="category">
  <h2>Work Websites</h2>
  <ul id="workList"></ul>
  <button onclick="openLinksInOrder('work')">Launch Work Links</button>
</div>

<div class="category">
  <h2>Personal Websites</h2>
  <ul id="personalList"></ul>
  <button onclick="openLinksInOrder('personal')">Launch Personal Links</button>
</div>

<script>
  // --- Session Token Logic ---
  function generateSessionToken() {
    // Simple random token generator
    return Math.random().toString(36).substr(2) + Date.now().toString(36);
  }

  // Set session token if not already set
  if (!sessionStorage.getItem('sessionToken')) {
    sessionStorage.setItem('sessionToken', generateSessionToken());
  }
  const sessionToken = sessionStorage.getItem('sessionToken');

  // Display session token (for demonstration)
  document.getElementById('sessionTokenDisplay').innerText =
    'Session Token: ' + sessionToken;

  // --- Storage Initialization ---
  if (!localStorage.getItem('workLinks')) {
    localStorage.setItem('workLinks', JSON.stringify([]));
  }
  if (!localStorage.getItem('personalLinks')) {
    localStorage.setItem('personalLinks', JSON.stringify([]));
  }

  // --- Display Existing Links ---
  window.onload = function() {
    displayLinks('work');
    displayLinks('personal');
  };

  // --- Add New Link with Session Token Check ---
  function addNewLink() {
    // Check session token before proceeding
    const currentToken = sessionStorage.getItem('sessionToken');
    if (!currentToken || currentToken !== sessionToken) {
      alert('Invalid session token. Please reload the page.');
      return;
    }

    const title = document.getElementById('linkTitle').value.trim();
    const url = document.getElementById('linkUrl').value.trim();
    const category = document.getElementById('linkCategory').value;

    if (title && url) {
      const links = JSON.parse(localStorage.getItem(category + 'Links'));
      links.push({ title, url });
      localStorage.setItem(category + 'Links', JSON.stringify(links));
      
      displayLinks(category);
      document.getElementById('linkTitle').value = '';
      document.getElementById('linkUrl').value = '';
    }
  }

  function displayLinks(category) {
    const list = document.getElementById(category + 'List');
    const links = JSON.parse(localStorage.getItem(category + 'Links'));
    
    list.innerHTML = '';
    links.forEach((link, index) => {
      const li = document.createElement('li');
      li.innerHTML = `
        ${link.title}: ${link.url}
        <span class="delete-btn" onclick="removeLink('${category}', ${index})">âœ•</span>
      `;
      list.appendChild(li);
    });
  }

  function removeLink(category, index) {
    const links = JSON.parse(localStorage.getItem(category + 'Links'));
    links.splice(index, 1);
    localStorage.setItem(category + 'Links', JSON.stringify(links));
    displayLinks(category);
  }

  function openLinksInOrder(category) {
    const links = JSON.parse(localStorage.getItem(category + 'Links'));
    links.forEach((link, index) => {
      setTimeout(() => window.open(link.url, '_blank'), index * 500);
    });
  }
</script>

</body>
</html>
